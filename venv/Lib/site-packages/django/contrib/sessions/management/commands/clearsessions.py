from importlib import import_module

from django.conf import settings
<<<<<<< Updated upstream
from django.core.management.base import BaseCommand, CommandError
=======
from django.core.management.base import BaseCommand
>>>>>>> Stashed changes


class Command(BaseCommand):
    help = (
        "Can be run as a cronjob or directly to clean out expired sessions "
<<<<<<< Updated upstream
        "when the backend supports it."
=======
        "(only with the database backend at the moment)."
>>>>>>> Stashed changes
    )

    def handle(self, **options):
        engine = import_module(settings.SESSION_ENGINE)
        try:
            engine.SessionStore.clear_expired()
        except NotImplementedError:
<<<<<<< Updated upstream
            raise CommandError(
                "Session engine '%s' doesn't support clearing expired "
                "sessions." % settings.SESSION_ENGINE
            )
=======
            self.stderr.write("Session engine '%s' doesn't support clearing "
                              "expired sessions.\n" % settings.SESSION_ENGINE)
>>>>>>> Stashed changes
